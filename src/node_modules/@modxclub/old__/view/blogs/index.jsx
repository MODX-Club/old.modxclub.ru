import React, {Component} from 'react';


import Avatar from '../../Avatar';
import Card, { CardHeader, CardMedia, CardContent, CardActions } from 'material-ui/Card';
import { Link } from 'react-router-dom';
import Typography from 'material-ui/Typography';
import Grid from 'material-ui/Grid';


// console.log('Card', Card, CardHeader, CardMedia, CardContent, CardActions);

import moment from 'moment';

export default class BlogsView extends Component {


  render(){

    let {
      classes,
    } = this.props;

    let {
    	document
    } = this.props.document;

    let {
    	data,
    } = document || {};

    let {
    	object: blogs,
    } = data || {};

    if(!blogs || !blogs.length){

    	return (<h3>Блоги не найдены</h3>);
    }

    let content = [];

    blogs.map(blog => {

    	let {
    		id,
    		pagetitle,
    		content: blog_content,
    		createdon,
    		uri,
    		author,
    		author_avatar,
    	} = blog;

    	// console.log('blog', blog);

    	content.push(<Grid
    		key={id || `blog_${content.length}`}
    		item
    		xs={12}
    		lg={6}
    		xl={4}
    	>
    		<Card
	    		style={{
	    			// marginTop: 20,
	    			// marginBottom: 20,
	    			height: '100%',
	    		}}
	    	>
	    		<CardHeader
	          className={classes.header}
	          avatar={
	          	<Link
		            to={`/profile/${document.author_username}/`}
		            href={`/profile/${document.author_username}/`}
		            className="underline-none"
		          >
		            <Avatar username={author} avatar={author_avatar}/>
		          </Link>
		        }
	          title={
	          	<Link
		            href={uri} 
		            to={uri} 
		            className="underline-none"
		          >
		            <Typography type="headline">{pagetitle}</Typography>
		          </Link>
		        }
	          subheader={
	          	<div>
		          	{
		          		(createdon ? moment(new Date((createdon) * 1000)).format('YYYY.MM.DD HH:mm') + " " : null)
		          	}
	         	 	</div>
	         	}
	    		/>

	    		{blog_content
	    			?
	    			<CardContent>
		      		<div dangerouslySetInnerHTML={{ __html: blog_content}} />
		    		</CardContent>
		    		:
		    		null
		    	}
	    	</Card>
    	</Grid>);
    });


  	// console.log('content', content);

    return <Grid
    	container
    >
    	{content}
    </Grid>;
  }
}

