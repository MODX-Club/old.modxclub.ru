import React, {Component} from 'react';

import {Link} from 'react-router-dom';

import PropTypes from 'prop-types'; 

export default class CompaniesListField extends Component{

	static propTypes = {
		companies: PropTypes.array.isRequired,
	};

	static defaultProps = {
	};

	constructor(props){

		super(props);

		this.state = {}
	} 

	render(){

		let {
			companies,
			renderer,
			...other
		} = this.props;

		if(!companies || !companies.length){

			return null;
		}

        
		// console.log('companies', companies);


    let companies_list = [];

    let content = null; 


		if(companies && companies.length){
      content = renderer && renderer(companies) ||
      	<span {...other}>{
      			companies.map(c => {

		        let {
		          id: company_id,
		          name,
		          uri,
		        } = c;

		        return <Link
		          key={company_id}
		          to={uri}
		          href={uri}
		          title={name}
		          className="link underline-none nowrap"
		        >
		          {name}
		        </Link>
		      }).reduce((prev, curr) => [prev, ', ', curr])}
	     	</span>;
    }

    return content;
	}
} 