import './styles/styles.less';

import React, {Component} from 'react';
import Card, { CardActions, CardHeader, CardMedia} from 'material-ui/Card';
import Grid from 'material-ui/Grid';

import IndexView from '../index/';

import {Link} from 'react-router-dom';

import Pagination from '../../pagination';

import WorksList from './list';

import {browserHistory} from 'react-router-dom';

export default class WorksView extends IndexView {


  constructor(props){

    super(props);

    // this.state = {
    //   data: props.document.document.data && props.document.document.data.object ? props.document.document.data.object : [],
    // }
  }


  componentDidMount(){

    typeof window !== "undefined" && (window.document.title = "Каталог сайтов на MODX");

    browserHistory && browserHistory.replace(browserHistory.getCurrentLocation());

    super.componentDidMount && super.componentDidMount();
  }

  contentBlock(){


    //   data: props.document.document.data && props.document.document.data.object ? props.document.document.data.object : [],

    // var works = this.state.data || [];

    let {
      user,
    } = this.props;

    let {
      object: works,
      page,
      limit,
      total,
    } = this.props.document.document && this.props.document.document.data || {}



    return <WorksList
      works={works}
      page={page}
      limit={limit}
      total={total}
      user={user}
    />

    var content = [];

    // works = works || [];

    // works && Array.isArray(works) && works.map((item) => {

    //   // console.log("work item", item);

    //   content.push(<Work
    //     key={item.id}
    //     data={item}
    //     documentActions={this.props.documentActions}
    //   />);
    // }, this);

    // let {
    //   document: doc,
    // } = this.props;

    // let {
    //   document,
    // } = doc || {};

    // let {
    //   page,
    //   limit,
    //   total,
    // } = document && document.data || {};


    return <div>
      <Grid
        container
      >
        {content}
      </Grid>

      {total && <Pagination
        page={page || 1}
        limit={limit}
        total={total}
      />}

    </div>;
  }

}

