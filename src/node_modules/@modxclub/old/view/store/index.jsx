import React, {Component} from 'react';

import PropTypes from 'prop-types';

import PackageCard from './package/';


export default class StoreView extends Component {

  static contextTypes = {
    setPagetitle: PropTypes.func.isRequired,
  }

  componentDidMount(){

    let {
      setPagetitle,
    } = this.context;

    setPagetitle("Дополнения для MODX");
  }

  render(){

    var document = this.props.document || {};

    var extras = [];

    if(
      this.props.document
      && this.props.document.document
      && this.props.document.document.data
      && this.props.document.document.data.length
    ){
      this.props.document.document.data.map(function(item){
        extras.push(
          <PackageCard
            key={item.id}
            data={item}
            user={this.props.user && this.props.user.user}
            userActions={this.props.userActions}
            documentActions={this.props.documentActions}
          />
        );
      }, this);
    }


    return (<div>
      <div dangerouslySetInnerHTML={{ __html: document.document.content}} />
      {extras}
    </div>);

    return null;
  }
}

