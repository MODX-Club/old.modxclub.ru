import React from 'react';

import moment from 'moment';
 
import Button from 'material-ui/Button';
import Avatar from '../Avatar';
import Card, { CardActions, CardHeader} from 'material-ui/Card';

import style from './styles';

class ArticleCard extends React.Component {

  onMoreClick(){
    // this.props.articleInfoShow({
    //   content: this.props.article,
    //   display: true,
    // });

    this.props.documentActions.LoadDocument(this.props.article.uri);
  }

  renderDate(timestamp){
    // let d = new Date(timestamp * 1000);
    // let date = [
    //   d.getDate() < 10 ? '0'+ d.getDate() : d.getDate(),
    //   d.getMonth() < 10 ? '0'+ d.getMonth() : d.getMonth(),
    //   d.getFullYear(),
    // ];
    // let time = [
    //   d.getHours() < 10 ? '0'+ d.getHours() : d.getHours(),
    //   d.getMinutes() < 10 ? '0'+ d.getMinutes() : d.getMinutes(),
    // ];
    //
    // // console.log(date, time);
    //
    // return date.join('.') +' '+ time.join(':')

    return moment(new Date(timestamp * 1000)).format('YYYY.MM.DD HH:mm');
  }

  render(){
    let article = this.props.article;

    var buttons = [
      <Button key="read_more" primary={true} onTouchTap={this.onMoreClick.bind(this)} >Читать дальше</Button>
    ];

    return (
      <Card key={article.id}>
        <CardHeader
          title={article.pagetitle}
          subheader={<span>{article.author_username} | {this.renderDate(article.publishedon || article.createdon)}</span>}
        />
          <div style={style.cardTextInner} dangerouslySetInnerHTML={{__html: article.short_text}}></div>

        <CardActions>
          <div>

            {article.comments_count}df
          </div>
          {buttons}
        </CardActions>
      </Card>
    );
  }
}
 

export default ArticleCard
